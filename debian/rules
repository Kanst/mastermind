#!/usr/bin/make -f
# Uncomment this to turn on verbose mode.
#export DH_VERBOSE=1
override_dh_builddeb:
	dh_builddeb -- -Zgzip

DEB_MAKE_CHECK_TARGET=test
DEB_PYTHON_SYSTEM=pycentral

DEB_BUILD_PARALLEL=yes
DEB_PARALLEL_JOBS ?= $(shell getconf _NPROCESSORS_ONLN 2>/dev/null || echo 1)

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/python-distutils.mk
include /usr/share/cdbs/1/class/cmake.mk


pre-build::
	mkdir -p $(CURDIR)/debian/tmp/usr/lib/mastermind/cocaine-app/
	mkdir -p $(CURDIR)/debian/tmp/usr/bin/
	cp $(CURDIR)/usr/bin/mastermind_deploy.sh $(CURDIR)/debian/tmp/usr/bin/mastermind_deploy.sh
	cp $(CURDIR)/usr/bin/mastermind_app_name.sh $(CURDIR)/debian/tmp/usr/bin/mastermind_app_name.sh
	$(CURDIR)/make_tree.sh $(CURDIR)

install/mastermind-utils::
	dh_bash-completion
